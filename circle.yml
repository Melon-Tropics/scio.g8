machine:
  java:
    version: oraclejdk8
  environment:
    SBT_OPTS: "-XX:ReservedCodeCacheSize=256m"

dependencies:
  cache_directories:
    - "~/.ivy2"
    - "~/.sbt"
  pre:
    - wget -q https://dl.bintray.com/sbt/debian/sbt-0.13.15.deb
    - sudo dpkg -i sbt-0.13.15.deb
    - find ~/.sbt -name "*.lock" | xargs -r rm
    - find ~/.ivy2 -name "ivydata-*.properties" | xargs -r rm
  override:
    - sbt compile

test:
  override:
    - sbt test
    - cd target/g8/scio-job && sbt scalastyle test # explicit due to bug https://github.com/foundweekends/giter8/issues/292
